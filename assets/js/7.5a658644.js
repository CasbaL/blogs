(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{207:function(e,t,a){"use strict";a.r(t);var r=a(0),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"集成-travis-ci-自动部署到-github-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成-travis-ci-自动部署到-github-page"}},[e._v("#")]),e._v(" 集成 Travis CI 自动部署到 GitHub page")]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://travis-ci.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Travis Ci 官网"),a("OutboundLink")],1),e._v("(直接用 GitHub 授权登录)"),a("br"),e._v(" "),a("a",{attrs:{href:"https://help.github.com/en/github/working-with-github-pages",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub pages help"),a("OutboundLink")],1),e._v("要使用 GitHub Pages 只需新建一个名字为 "),a("code",[e._v("username.github.io")]),e._v(" 的仓库，然后把"),a("a",{attrs:{href:"./2020-01-09"}},[e._v("打包好的文件")]),e._v("push 到这个仓库的 master 分支就行；")])]),e._v(" "),a("p",[e._v("我们先"),a("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/deploy.html#github-pages-and-travis-ci",target:"_blank",rel:"noopener noreferrer"}},[e._v("打开这个链接"),a("OutboundLink")],1),e._v(" 这里已经有很明细的教程；这里我就只记录下配置时要注意的几个点：")]),e._v(" "),a("p",[e._v("这个是我的 casbal.github.io 的"),a("code",[e._v(".travis.yml")]),e._v("配置文件")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    language: node_js\n    node_js:\n      - lts/*\n    install:\n      - yarn install # npm ci\n    script:\n      - yarn build\n\n    deploy:\n      provider: pages\n      skip_cleanup: true\n      local_dir: .vuepress/dist # 打包后的静态文件位置目录\n      github_token: $ACESSS_TOKEN  # 在 Travis 官网选择一个仓库的设置\n      keep_history: true\n      target_branch: master # 将 local_dir 的文件强制 push 到的目标分支\n      on:\n        branch: blogs # 这个是我写作的分支\n")])])]),a("p",[e._v("$ACESSS_TOKEN 这个值是在 Travis 官网选择一个仓库的设置中的 "),a("code",[e._v("Environment Variables")]),e._v(" 来添加 "),a("code",[e._v("name")]),e._v(", "),a("a",{attrs:{href:"https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("value")]),a("OutboundLink")],1),e._v(", "),a("code",[e._v("branch")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("ol",[a("li",[e._v("这个要跟配置文件中的 -on -branch 对应，不然就会出现权限问题，没法push打包后的文件；")]),e._v(" "),a("li",[e._v("ACESSS_TOKEN 这个名字配置时是不用"),a("code",[e._v("$")]),e._v("的，在配置文件中引用是要加上"),a("code",[e._v("$")]),e._v("的")])])]),e._v(" "),a("p",[e._v("然后我这里更改了on > branch 和 target_branch 的配置，默认不改是可以的，但是要注意在"),a("code",[e._v(".vuepress/config.js")]),e._v(" 中设置正确的 base")])])}),[],!1,null,null,null);t.default=n.exports}}]);